{% extends "SimpleAdminBundle::SimpleAdmin/windowTemplate.html.twig" %}
{% block window_title %}{{ 'Edit' | trans }} [[ listingWindows['{{  windowId }}'].metadata.name ]]{% endblock %}
{% block window_content %}
    <table class="content">
        <tbody>
            <tr ng-repeat="mapping in listingWindowsRecords['{{ windowId }}'][{{ recordId }}].data.mappings">
                <td>
                    <b>[[ mapping.fieldName ]]</b>
                    <div ng-switch on="mapping.targetEntity | doctrineEntityName">
                        <div class="[[ mapping.joinColumns[0].name ]]" ng-switch-when="Media">
                            <input name="" type="text" value="[[]]" />
                        </div>
                        <div class="[[ mapping.joinColumns[0].name ]]" ng-switch-default>
                            <input name="[[ mapping.joinColumns[0].name ]]_value_label" type="text" value="[[ listingWindowsRecords['{{ windowId }}'][{{ recordId }}].data.entry[mapping.fieldName]['name'] ]]" />
                            <input name="[[ mapping.joinColumns[0].name ]]" type="hidden" value="[[ listingWindowsRecords['{{ windowId }}'][{{ recordId }}].data.entry[mapping.fieldName]['id'] ]]" />
                        </div>
                    </div>
                </td>
            </tr>
            <tr ng-repeat="field in listingWindowsRecords['{{ windowId }}'][{{ recordId }}].data.fields">
                <td>
                   <b>[[ field.fieldName ]]</b>
                   <div ng-switch on="field.type">
                       <div class="[[ field.type ]]" ng-switch-when="integer">
                           <input name="[[ field.columnName ]]" type="text" value="[[ listingWindowsRecords['{{ windowId }}'][{{ recordId }}].data.entry[field.columnName.toLowerCase()] ]]" />
                       </div>
                       <div class="[[ field.type ]]" ng-switch-when="string">
                           <input name="[[ field.columnName ]]" type="text" value="[[ listingWindowsRecords['{{ windowId }}'][{{ recordId }}].data.entry[field.columnName.toLowerCase()] ]]" />
                       </div>
                   </div>
                </td>
            </tr>
        </tbody>
    </table>
{% endblock window_content %}